import{aT as V,r as W,ab as N,a8 as I,f as Q,aP as k,w,o as X,e as P,g as D,aO as F,l as C,aU as K,aV as J,ah as Y,aW as R,j as O,aX as G,a as Z}from"./index-GjPtNqzj.js";function _(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),V.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const ee={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},oe={...ee,contextMenu:Boolean};function ue({showing:e,avoidEmit:t,configureAnchorEl:l}){const{props:n,proxy:i,emit:r}=D(),o=W(null);let c=null;function d(a){return o.value===null?!1:a===void 0||a.touches===void 0||a.touches.length<=1}const s={};l===void 0&&(Object.assign(s,{hide(a){i.hide(a)},toggle(a){i.toggle(a),a.qAnchorHandled=!0},toggleKey(a){N(a,13)===!0&&s.toggle(a)},contextClick(a){i.hide(a),I(a),Q(()=>{i.show(a),a.qAnchorHandled=!0})},prevent:I,mobileTouch(a){if(s.mobileCleanup(a),d(a)!==!0)return;i.hide(a),o.value.classList.add("non-selectable");const u=a.target;k(s,"anchor",[[u,"touchmove","mobileCleanup","passive"],[u,"touchend","mobileCleanup","passive"],[u,"touchcancel","mobileCleanup","passive"],[o.value,"contextmenu","prevent","notPassive"]]),c=setTimeout(()=>{c=null,i.show(a),a.qAnchorHandled=!0},300)},mobileCleanup(a){o.value.classList.remove("non-selectable"),c!==null&&(clearTimeout(c),c=null),e.value===!0&&a!==void 0&&_()}}),l=function(a=n.contextMenu){if(n.noParentEvent===!0||o.value===null)return;let u;a===!0?i.$q.platform.is.mobile===!0?u=[[o.value,"touchstart","mobileTouch","passive"]]:u=[[o.value,"mousedown","hide","passive"],[o.value,"contextmenu","contextClick","notPassive"]]:u=[[o.value,"click","toggle","passive"],[o.value,"keyup","toggleKey","passive"]],k(s,"anchor",u)});function f(){F(s,"anchor")}function S(a){for(o.value=a;o.value.classList.contains("q-anchor--skip");)o.value=o.value.parentNode;l()}function p(){if(n.target===!1||n.target===""||i.$el.parentNode===null)o.value=null;else if(n.target===!0)S(i.$el.parentNode);else{let a=n.target;if(typeof n.target=="string")try{a=document.querySelector(n.target)}catch{a=void 0}a!=null?(o.value=a.$el||a,l()):(o.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return w(()=>n.contextMenu,a=>{o.value!==null&&(f(),l(a))}),w(()=>n.target,()=>{o.value!==null&&f(),p()}),w(()=>n.noParentEvent,a=>{o.value!==null&&(a===!0?f():l())}),X(()=>{p(),t!==!0&&n.modelValue===!0&&o.value===null&&r("update:modelValue",!1)}),P(()=>{c!==null&&clearTimeout(c),f()}),{anchorEl:o,canShow:d,anchorEvents:s}}function re(e,t){const l=W(null);let n;function i(c,d){const s=`${d!==void 0?"add":"remove"}EventListener`,f=d!==void 0?d:n;c!==window&&c[s]("scroll",f,C.passive),window[s]("scroll",f,C.passive),n=d}function r(){l.value!==null&&(i(l.value),l.value=null)}const o=w(()=>e.noParentEvent,()=>{l.value!==null&&(r(),t())});return P(o),{localScrollTarget:l,unconfigureScrollTarget:r,changeScrollEvent:i}}const{notPassiveCapture:H}=C,v=[];function L(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let l=K.length-1;for(;l>=0;){const n=K[l].$;if(n.type.name==="QTooltip"){l--;continue}if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;l--}for(let n=v.length-1;n>=0;n--){const i=v[n];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function se(e){v.push(e),v.length===1&&(document.addEventListener("mousedown",L,H),document.addEventListener("touchstart",L,H))}function ce(e){const t=v.findIndex(l=>l===e);t!==-1&&(v.splice(t,1),v.length===0&&(document.removeEventListener("mousedown",L,H),document.removeEventListener("touchstart",L,H)))}let $,q;function de(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function fe(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const A={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{A[`${e}#ltr`]=e,A[`${e}#rtl`]=e});function he(e,t){const l=e.split(" ");return{vertical:l[0],horizontal:A[`${l[1]}#${t===!0?"rtl":"ltr"}`]}}function te(e,t){let{top:l,left:n,right:i,bottom:r,width:o,height:c}=e.getBoundingClientRect();return t!==void 0&&(l-=t[1],n-=t[0],r+=t[1],i+=t[0],o+=t[0],c+=t[1]),{top:l,bottom:r,height:c,left:n,right:i,width:o,middle:n+(i-n)/2,center:l+(r-l)/2}}function ne(e,t,l){let{top:n,left:i}=e.getBoundingClientRect();return n+=t.top,i+=t.left,l!==void 0&&(n+=l[1],i+=l[0]),{top:n,bottom:n+1,height:1,left:i,right:i+1,width:1,middle:i,center:n}}function le(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function j(e,t,l,n){return{top:e[l.vertical]-t[n.vertical],left:e[l.horizontal]-t[n.horizontal]}}function ie(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{ie(e,t+1)},10);return}const{targetEl:l,offset:n,anchorEl:i,anchorOrigin:r,selfOrigin:o,absoluteOffset:c,fit:d,cover:s,maxHeight:f,maxWidth:S}=e;if(J.is.ios===!0&&window.visualViewport!==void 0){const E=document.body.style,{offsetLeft:b,offsetTop:g}=window.visualViewport;b!==$&&(E.setProperty("--q-pe-left",b+"px"),$=b),g!==q&&(E.setProperty("--q-pe-top",g+"px"),q=g)}const{scrollLeft:p,scrollTop:a}=l,u=c===void 0?te(i,s===!0?[0,0]:n):ne(i,c,n);Object.assign(l.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:S,maxHeight:f,visibility:"visible"});const{offsetWidth:z,offsetHeight:M}=l,{elWidth:B,elHeight:U}=d===!0||s===!0?{elWidth:Math.max(u.width,z),elHeight:s===!0?Math.max(u.height,M):M}:{elWidth:z,elHeight:M};let m={maxWidth:S,maxHeight:f};(d===!0||s===!0)&&(m.minWidth=u.width+"px",s===!0&&(m.minHeight=u.height+"px")),Object.assign(l.style,m);const x=le(B,U);let h=j(u,x,r,o);if(c===void 0||n===void 0)T(h,u,x,r,o);else{const{top:E,left:b}=h;T(h,u,x,r,o);let g=!1;if(h.top!==E){g=!0;const y=2*n[1];u.center=u.top-=y,u.bottom-=y+2}if(h.left!==b){g=!0;const y=2*n[0];u.middle=u.left-=y,u.right-=y+2}g===!0&&(h=j(u,x,r,o),T(h,u,x,r,o))}m={top:h.top+"px",left:h.left+"px"},h.maxHeight!==void 0&&(m.maxHeight=h.maxHeight+"px",u.height>h.maxHeight&&(m.minHeight=m.maxHeight)),h.maxWidth!==void 0&&(m.maxWidth=h.maxWidth+"px",u.width>h.maxWidth&&(m.minWidth=m.maxWidth)),Object.assign(l.style,m),l.scrollTop!==a&&(l.scrollTop=a),l.scrollLeft!==p&&(l.scrollLeft=p)}function T(e,t,l,n,i){const r=l.bottom,o=l.right,c=Y(),d=window.innerHeight-c,s=document.body.clientWidth;if(e.top<0||e.top+r>d)if(i.vertical==="center")e.top=t[n.vertical]>d/2?Math.max(0,d-r):0,e.maxHeight=Math.min(r,d);else if(t[n.vertical]>d/2){const f=Math.min(d,n.vertical==="center"?t.center:n.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,f),e.top=Math.max(0,f-r)}else e.top=Math.max(0,n.vertical==="center"?t.center:n.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,d-e.top);if(e.left<0||e.left+o>s)if(e.maxWidth=Math.min(o,s),i.horizontal==="middle")e.left=t[n.horizontal]>s/2?Math.max(0,s-o):0;else if(t[n.horizontal]>s/2){const f=Math.min(s,n.horizontal==="middle"?t.middle:n.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(o,f),e.left=Math.max(0,f-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?t.middle:n.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(o,s-e.left)}function me(e,t,l){return l<=t?t:Math.min(l,Math.max(t,e))}function ge(e,t,l){if(l<=t)return t;const n=l-t+1;let i=t+(e-t)%n;return i<t&&(i=n+i),i===0?0:i}const ve=R("settings",()=>{const e=W({openAIKey:""});return w(e,n=>{localStorage.setItem("wiki-millionaire-settings",JSON.stringify(n))},{deep:!0}),localStorage.getItem("wiki-millionaire-settings")&&(e.value=JSON.parse(localStorage.getItem("wiki-millionaire-settings")||"{}")),{settingsState:e,setOpenAIKey:n=>{e.value.openAIKey=n},getOpenAIKey:()=>e.value.openAIKey}});function pe(){return O(G)}const xe=R("language",()=>{const e=W("en-US"),t=[{label:"English",value:"en-US",code:"en"},{label:"Deutsch",value:"de",code:"de"},{label:"Español",value:"es",code:"es"},{label:"Français",value:"fr",code:"fr"},{label:"Italiano",value:"it",code:"it"},{label:"Português",value:"pt",code:"pt"},{label:"Русский",value:"ru",code:"ru"},{label:"日本語",value:"ja",code:"ja"},{label:"中文",value:"zh",code:"zh"},{label:"Српски",value:"sr-Cyr",code:"sr"}],l=r=>{localStorage.setItem("selectedLocale",r),e.value=r},n=()=>(console.log("currentLocale.value",e.value),t.find(r=>r.value===e.value)),i=Z(()=>t);return e.value=localStorage.getItem("selectedLocale")||"en-US",{currentLocale:e,setCurrentLocale:l,availableLanguages:i,getCurrentLanguage:n}});export{fe as a,re as b,ue as c,se as d,pe as e,ve as f,xe as g,ee as h,_ as i,me as j,ge as n,he as p,ce as r,ie as s,oe as u,de as v};
