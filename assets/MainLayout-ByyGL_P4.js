import{k as Q,c as f,h as m,l as F,r as w,m as X,o as O,n as k,p as Z,q as W,g as V,t as N,i as ee,u as L,v as K,w as q,x as oe,y as te,z as le,A as ie,B as ae,C as re,D as se,E as A,G as P,a as ue,H as ce,d as de,I as fe,J as ve,K as he,L as x,f as g,M as B,Q as ge,N as E,O as me,P as U,R as H,S as pe,U as ye,V as j,W as be}from"./index-OacrjVwj.js";import{C as G}from"./ClosePopup-1NMUDq4H.js";import{u as we,a as Se}from"./use-quasar-BvFwn2MB.js";const ze=Q({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:v}){const n=f(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>m("div",{class:n.value},F(v.default))}}),xe=Q({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:v}){const n=f(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>m("div",{class:n.value,role:"toolbar"},F(v.default))}});function Ce(){const e=w(!X.value);return e.value===!1&&O(()=>{e.value=!0}),{isHydrated:e}}const ne=typeof ResizeObserver<"u",J=ne===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},D=Q({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:v}){let n=null,t,o={width:-1,height:-1};function a(r){r===!0||e.debounce===0||e.debounce==="0"?u():n===null&&(n=setTimeout(u,e.debounce))}function u(){if(n!==null&&(clearTimeout(n),n=null),t){const{offsetWidth:r,offsetHeight:l}=t;(r!==o.width||l!==o.height)&&(o={width:r,height:l},v("resize",o))}}const{proxy:h}=V();if(h.trigger=a,ne===!0){let r;const l=p=>{t=h.$el.parentNode,t?(r=new ResizeObserver(a),r.observe(t),u()):p!==!0&&W(()=>{l(!0)})};return O(()=>{l()}),k(()=>{n!==null&&clearTimeout(n),r!==void 0&&(r.disconnect!==void 0?r.disconnect():t&&r.unobserve(t))}),Z}else{let r=function(){n!==null&&(clearTimeout(n),n=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",a,N.passive),d=void 0)},l=function(){r(),t&&t.contentDocument&&(d=t.contentDocument.defaultView,d.addEventListener("resize",a,N.passive),u())};const{isHydrated:p}=Ce();let d;return O(()=>{W(()=>{t=h.$el,t&&l()})}),k(r),()=>{if(p.value===!0)return m("object",{class:"q--avoid-card-border",style:J.style,tabindex:-1,type:"text/html",data:J.url,"aria-hidden":"true",onLoad:l})}}}}),Te=Q({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:v,emit:n}){const{proxy:{$q:t}}=V(),o=ee(K,L);if(o===L)return console.error("QHeader needs to be child of QLayout"),L;const a=w(parseInt(e.heightHint,10)),u=w(!0),h=f(()=>e.reveal===!0||o.view.value.indexOf("H")!==-1||t.platform.is.ios&&o.isContainer.value===!0),r=f(()=>{if(e.modelValue!==!0)return 0;if(h.value===!0)return u.value===!0?a.value:0;const i=a.value-o.scroll.value.position;return i>0?i:0}),l=f(()=>e.modelValue!==!0||h.value===!0&&u.value!==!0),p=f(()=>e.modelValue===!0&&l.value===!0&&e.reveal===!0),d=f(()=>"q-header q-layout__section--marginal "+(h.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(l.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),C=f(()=>{const i=o.rows.value.top,b={};return i[0]==="l"&&o.left.space===!0&&(b[t.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),i[2]==="r"&&o.right.space===!0&&(b[t.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),b});function c(i,b){o.update("header",i,b)}function S(i,b){i.value!==b&&(i.value=b)}function R({height:i}){S(a,i),c("size",i)}function _(i){p.value===!0&&S(u,!0),n("focusin",i)}q(()=>e.modelValue,i=>{c("space",i),S(u,!0),o.animate()}),q(r,i=>{c("offset",i)}),q(()=>e.reveal,i=>{i===!1&&S(u,e.modelValue)}),q(u,i=>{o.animate(),n("reveal",i)}),q(o.scroll,i=>{e.reveal===!0&&S(u,i.direction==="up"||i.position<=e.revealOffset||i.position-i.inflectionPoint<100)});const $={};return o.instances.header=$,e.modelValue===!0&&c("size",a.value),c("space",e.modelValue),c("offset",r.value),k(()=>{o.instances.header===$&&(o.instances.header=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const i=oe(v.default,[]);return e.elevated===!0&&i.push(m("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),i.push(m(D,{debounce:0,onResize:R})),m("header",{class:d.value,style:C.value,onFocusin:_},i)}}}),qe=Q({name:"QPageContainer",setup(e,{slots:v}){const{proxy:{$q:n}}=V(),t=ee(K,L);if(t===L)return console.error("QPageContainer needs to be child of QLayout"),L;te(le,!0);const o=f(()=>{const a={};return t.header.space===!0&&(a.paddingTop=`${t.header.size}px`),t.right.space===!0&&(a[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(a.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(a[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),a});return()=>m("div",{class:"q-page-container",style:o.value},F(v.default))}}),{passive:Y}=N,Qe=["both","horizontal","vertical"],Le=Q({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Qe.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ie},emits:["scroll"],setup(e,{emit:v}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,o,a;q(()=>e.scrollTarget,()=>{r(),h()});function u(){t!==null&&t();const d=Math.max(0,re(o)),C=se(o),c={top:d-n.position.top,left:C-n.position.left};if(e.axis==="vertical"&&c.top===0||e.axis==="horizontal"&&c.left===0)return;const S=Math.abs(c.top)>=Math.abs(c.left)?c.top<0?"up":"down":c.left<0?"left":"right";n.position={top:d,left:C},n.directionChanged=n.direction!==S,n.delta=c,n.directionChanged===!0&&(n.direction=S,n.inflectionPoint=n.position),v("scroll",{...n})}function h(){o=ae(a,e.scrollTarget),o.addEventListener("scroll",l,Y),l(!0)}function r(){o!==void 0&&(o.removeEventListener("scroll",l,Y),o=void 0)}function l(d){if(d===!0||e.debounce===0||e.debounce==="0")u();else if(t===null){const[C,c]=e.debounce?[setTimeout(u,e.debounce),clearTimeout]:[requestAnimationFrame(u),cancelAnimationFrame];t=()=>{c(C),t=null}}}const{proxy:p}=V();return q(()=>p.$q.lang.rtl,u),O(()=>{a=p.$el.parentNode,h()}),k(()=>{t!==null&&t(),r()}),Object.assign(p,{trigger:l,getPosition:()=>n}),Z}}),$e=Q({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:v,emit:n}){const{proxy:{$q:t}}=V(),o=w(null),a=w(t.screen.height),u=w(e.container===!0?0:t.screen.width),h=w({position:0,direction:"down",inflectionPoint:0}),r=w(0),l=w(X.value===!0?0:A()),p=f(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),d=f(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),C=f(()=>l.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${l.value}px`}:null),c=f(()=>l.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${l.value}px`,width:`calc(100% + ${l.value}px)`}:null);function S(s){if(e.container===!0||document.qScrollPrevented!==!0){const y={position:s.position.top,direction:s.direction,directionChanged:s.directionChanged,inflectionPoint:s.inflectionPoint.top,delta:s.delta.top};h.value=y,e.onScroll!==void 0&&n("scroll",y)}}function R(s){const{height:y,width:T}=s;let z=!1;a.value!==y&&(z=!0,a.value=y,e.onScrollHeight!==void 0&&n("scrollHeight",y),$()),u.value!==T&&(z=!0,u.value=T),z===!0&&e.onResize!==void 0&&n("resize",s)}function _({height:s}){r.value!==s&&(r.value=s,$())}function $(){if(e.container===!0){const s=a.value>r.value?A():0;l.value!==s&&(l.value=s)}}let i=null;const b={instances:{},view:f(()=>e.view),isContainer:f(()=>e.container),rootRef:o,height:a,containerHeight:r,scrollbarWidth:l,totalWidth:f(()=>u.value+l.value),rows:f(()=>{const s=e.view.toLowerCase().split(" ");return{top:s[0].split(""),middle:s[1].split(""),bottom:s[2].split("")}}),header:P({size:0,offset:0,space:!1}),right:P({size:300,offset:0,space:!1}),footer:P({size:0,offset:0,space:!1}),left:P({size:300,offset:0,space:!1}),scroll:h,animate(){i!==null?clearTimeout(i):document.body.classList.add("q-body--layout-animate"),i=setTimeout(()=>{i=null,document.body.classList.remove("q-body--layout-animate")},155)},update(s,y,T){b[s][y]=T}};if(te(K,b),A()>0){let s=function(){z=null,I.classList.remove("hide-scrollbar")},y=function(){if(z===null){if(I.scrollHeight>t.screen.height)return;I.classList.add("hide-scrollbar")}else clearTimeout(z);z=setTimeout(s,300)},T=function(M){z!==null&&M==="remove"&&(clearTimeout(z),s()),window[`${M}EventListener`]("resize",y)},z=null;const I=document.body;q(()=>e.container!==!0?"add":"remove",T),e.container!==!0&&T("add"),ue(()=>{T("remove")})}return()=>{const s=ce(v.default,[m(Le,{onScroll:S}),m(D,{onResize:R})]),y=m("div",{class:p.value,style:d.value,ref:e.container===!0?void 0:o,tabindex:-1},s);return e.container===!0?m("div",{class:"q-layout-container overflow-hidden",ref:o},[m(D,{onResize:_}),m("div",{class:"absolute-full",style:C.value},[m("div",{class:"scroll",style:c.value},[y])])]):y}}}),He=de({__name:"MainLayout",setup(e){const v=we(),n=Se(),{settingsState:t}=n,o=w(!1),a=w(t.openAIKey);function u(){o.value=!0}function h(){n.setOpenAIKey(a.value)}return O(()=>{t.openAIKey||v.dialog({title:"Open AI Key Required",message:"Please enter your Open AI key in settings",persistent:!0,ok:"Go to Settings"}).onOk(()=>{u()})}),(r,l)=>{const p=fe("router-view");return ve(),he($e,{view:"hHh lpR fFf"},{default:x(()=>[g(Te,{elevated:"",class:"bg-primary text-white"},{default:x(()=>[g(xe,null,{default:x(()=>[g(ze,null,{default:x(()=>l[2]||(l[2]=[B(" Wiki Millionaire ")])),_:1}),g(ge,{vertical:""}),g(E,{flat:"",round:"",dense:"",icon:"settings",onClick:u})]),_:1})]),_:1}),g(qe,null,{default:x(()=>[g(p)]),_:1}),g(be,{modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=d=>o.value=d)},{default:x(()=>[g(me,{style:{"min-width":"350px","max-width":"90vw"},class:"q-mt-lg"},{default:x(()=>[g(U,null,{default:x(()=>l[3]||(l[3]=[H("div",{class:"text-h6"},"Settings",-1),H("div",{class:"text-caption"},"Configure game settings",-1)])),_:1}),g(U,null,{default:x(()=>[l[4]||(l[4]=H("div",{class:"text-caption"},[B("If the default Open AI key does not work. You can use your own, just make sure it has access to "),H("code",null,"gpt-4o-mini"),B(" model.")],-1)),g(pe,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=d=>a.value=d),label:"Open AI Key",hint:"Enter your Open AI API key"},null,8,["modelValue"])]),_:1}),g(ye,{align:"right"},{default:x(()=>[j(g(E,{flat:"",label:"Cancel",color:"primary"},null,512),[[G]]),j(g(E,{flat:"",label:"Save",color:"primary",onClick:h},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{He as default};
