import{k as Q,c as v,h as m,l as F,r as S,m as ne,o as P,n as H,p as oe,q as W,g as V,t as N,i as le,u as $,v as K,w as q,x as re,y as ie,z as se,A as ue,B as ce,C as de,D as fe,E,G as O,a as ve,H as ge,d as he,I as me,J as pe,K as A,L as U,M as C,f as h,N as ye,O as _,P as be,Q as j,R as G,S as Se,U as I,V as we,W as J,X,Y as ze,Z as xe,_ as Y,$ as Ce}from"./index-COFFwYTE.js";import{C as Z}from"./ClosePopup-BBGBY4Ni.js";import{u as Te,a as qe}from"./use-quasar-DJtW7cic.js";const Qe=Q({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:g}){const o=v(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>m("div",{class:o.value},F(g.default))}}),$e=Q({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:g}){const o=v(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>m("div",{class:o.value,role:"toolbar"},F(g.default))}});function Le(){const e=S(!ne.value);return e.value===!1&&P(()=>{e.value=!0}),{isHydrated:e}}const ae=typeof ResizeObserver<"u",ee=ae===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},D=Q({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(e,{emit:g}){let o=null,t,n={width:-1,height:-1};function r(i){i===!0||e.debounce===0||e.debounce==="0"?s():o===null&&(o=setTimeout(s,e.debounce))}function s(){if(o!==null&&(clearTimeout(o),o=null),t){const{offsetWidth:i,offsetHeight:a}=t;(i!==n.width||a!==n.height)&&(n={width:i,height:a},g("resize",n))}}const{proxy:f}=V();if(f.trigger=r,ae===!0){let i;const a=y=>{t=f.$el.parentNode,t?(i=new ResizeObserver(r),i.observe(t),s()):y!==!0&&W(()=>{a(!0)})};return P(()=>{a()}),H(()=>{o!==null&&clearTimeout(o),i!==void 0&&(i.disconnect!==void 0?i.disconnect():t&&i.unobserve(t))}),oe}else{let i=function(){o!==null&&(clearTimeout(o),o=null),d!==void 0&&(d.removeEventListener!==void 0&&d.removeEventListener("resize",r,N.passive),d=void 0)},a=function(){i(),t&&t.contentDocument&&(d=t.contentDocument.defaultView,d.addEventListener("resize",r,N.passive),s())};const{isHydrated:y}=Le();let d;return P(()=>{W(()=>{t=f.$el,t&&a()})}),H(i),()=>{if(y.value===!0)return m("object",{class:"q--avoid-card-border",style:ee.style,tabindex:-1,type:"text/html",data:ee.url,"aria-hidden":"true",onLoad:a})}}}}),Pe=Q({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:g,emit:o}){const{proxy:{$q:t}}=V(),n=le(K,$);if(n===$)return console.error("QHeader needs to be child of QLayout"),$;const r=S(parseInt(e.heightHint,10)),s=S(!0),f=v(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||t.platform.is.ios&&n.isContainer.value===!0),i=v(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return s.value===!0?r.value:0;const l=r.value-n.scroll.value.position;return l>0?l:0}),a=v(()=>e.modelValue!==!0||f.value===!0&&s.value!==!0),y=v(()=>e.modelValue===!0&&a.value===!0&&e.reveal===!0),d=v(()=>"q-header q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(a.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),w=v(()=>{const l=n.rows.value.top,b={};return l[0]==="l"&&n.left.space===!0&&(b[t.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),l[2]==="r"&&n.right.space===!0&&(b[t.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),b});function u(l,b){n.update("header",l,b)}function z(l,b){l.value!==b&&(l.value=b)}function k({height:l}){z(r,l),u("size",l)}function R(l){y.value===!0&&z(s,!0),o("focusin",l)}q(()=>e.modelValue,l=>{u("space",l),z(s,!0),n.animate()}),q(i,l=>{u("offset",l)}),q(()=>e.reveal,l=>{l===!1&&z(s,e.modelValue)}),q(s,l=>{n.animate(),o("reveal",l)}),q(n.scroll,l=>{e.reveal===!0&&z(s,l.direction==="up"||l.position<=e.revealOffset||l.position-l.inflectionPoint<100)});const L={};return n.instances.header=L,e.modelValue===!0&&u("size",r.value),u("space",e.modelValue),u("offset",i.value),H(()=>{n.instances.header===L&&(n.instances.header=void 0,u("size",0),u("offset",0),u("space",!1))}),()=>{const l=re(g.default,[]);return e.elevated===!0&&l.push(m("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),l.push(m(D,{debounce:0,onResize:k})),m("header",{class:d.value,style:w.value,onFocusin:R},l)}}}),Ve=Q({name:"QPageContainer",setup(e,{slots:g}){const{proxy:{$q:o}}=V(),t=le(K,$);if(t===$)return console.error("QPageContainer needs to be child of QLayout"),$;ie(se,!0);const n=v(()=>{const r={};return t.header.space===!0&&(r.paddingTop=`${t.header.size}px`),t.right.space===!0&&(r[`padding${o.lang.rtl===!0?"Left":"Right"}`]=`${t.right.size}px`),t.footer.space===!0&&(r.paddingBottom=`${t.footer.size}px`),t.left.space===!0&&(r[`padding${o.lang.rtl===!0?"Right":"Left"}`]=`${t.left.size}px`),r});return()=>m("div",{class:"q-page-container",style:n.value},F(g.default))}}),{passive:te}=N,Oe=["both","horizontal","vertical"],_e=Q({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Oe.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ue},emits:["scroll"],setup(e,{emit:g}){const o={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let t=null,n,r;q(()=>e.scrollTarget,()=>{i(),f()});function s(){t!==null&&t();const d=Math.max(0,de(n)),w=fe(n),u={top:d-o.position.top,left:w-o.position.left};if(e.axis==="vertical"&&u.top===0||e.axis==="horizontal"&&u.left===0)return;const z=Math.abs(u.top)>=Math.abs(u.left)?u.top<0?"up":"down":u.left<0?"left":"right";o.position={top:d,left:w},o.directionChanged=o.direction!==z,o.delta=u,o.directionChanged===!0&&(o.direction=z,o.inflectionPoint=o.position),g("scroll",{...o})}function f(){n=ce(r,e.scrollTarget),n.addEventListener("scroll",a,te),a(!0)}function i(){n!==void 0&&(n.removeEventListener("scroll",a,te),n=void 0)}function a(d){if(d===!0||e.debounce===0||e.debounce==="0")s();else if(t===null){const[w,u]=e.debounce?[setTimeout(s,e.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];t=()=>{u(w),t=null}}}const{proxy:y}=V();return q(()=>y.$q.lang.rtl,s),P(()=>{r=y.$el.parentNode,f()}),H(()=>{t!==null&&t(),i()}),Object.assign(y,{trigger:a,getPosition:()=>o}),oe}}),He=Q({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:g,emit:o}){const{proxy:{$q:t}}=V(),n=S(null),r=S(t.screen.height),s=S(e.container===!0?0:t.screen.width),f=S({position:0,direction:"down",inflectionPoint:0}),i=S(0),a=S(ne.value===!0?0:E()),y=v(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),d=v(()=>e.container===!1?{minHeight:t.screen.height+"px"}:null),w=v(()=>a.value!==0?{[t.lang.rtl===!0?"left":"right"]:`${a.value}px`}:null),u=v(()=>a.value!==0?{[t.lang.rtl===!0?"right":"left"]:0,[t.lang.rtl===!0?"left":"right"]:`-${a.value}px`,width:`calc(100% + ${a.value}px)`}:null);function z(c){if(e.container===!0||document.qScrollPrevented!==!0){const p={position:c.position.top,direction:c.direction,directionChanged:c.directionChanged,inflectionPoint:c.inflectionPoint.top,delta:c.delta.top};f.value=p,e.onScroll!==void 0&&o("scroll",p)}}function k(c){const{height:p,width:T}=c;let x=!1;r.value!==p&&(x=!0,r.value=p,e.onScrollHeight!==void 0&&o("scrollHeight",p),L()),s.value!==T&&(x=!0,s.value=T),x===!0&&e.onResize!==void 0&&o("resize",c)}function R({height:c}){i.value!==c&&(i.value=c,L())}function L(){if(e.container===!0){const c=r.value>i.value?E():0;a.value!==c&&(a.value=c)}}let l=null;const b={instances:{},view:v(()=>e.view),isContainer:v(()=>e.container),rootRef:n,height:r,containerHeight:i,scrollbarWidth:a,totalWidth:v(()=>s.value+a.value),rows:v(()=>{const c=e.view.toLowerCase().split(" ");return{top:c[0].split(""),middle:c[1].split(""),bottom:c[2].split("")}}),header:O({size:0,offset:0,space:!1}),right:O({size:300,offset:0,space:!1}),footer:O({size:0,offset:0,space:!1}),left:O({size:300,offset:0,space:!1}),scroll:f,animate(){l!==null?clearTimeout(l):document.body.classList.add("q-body--layout-animate"),l=setTimeout(()=>{l=null,document.body.classList.remove("q-body--layout-animate")},155)},update(c,p,T){b[c][p]=T}};if(ie(K,b),E()>0){let c=function(){x=null,B.classList.remove("hide-scrollbar")},p=function(){if(x===null){if(B.scrollHeight>t.screen.height)return;B.classList.add("hide-scrollbar")}else clearTimeout(x);x=setTimeout(c,300)},T=function(M){x!==null&&M==="remove"&&(clearTimeout(x),c()),window[`${M}EventListener`]("resize",p)},x=null;const B=document.body;q(()=>e.container!==!0?"add":"remove",T),e.container!==!0&&T("add"),ve(()=>{T("remove")})}return()=>{const c=ge(g.default,[m(_e,{onScroll:z}),m(D,{onResize:k})]),p=m("div",{class:y.value,style:d.value,ref:e.container===!0?void 0:n,tabindex:-1},c);return e.container===!0?m("div",{class:"q-layout-container overflow-hidden",ref:n},[m(D,{onResize:R}),m("div",{class:"absolute-full",style:w.value},[m("div",{class:"scroll",style:u.value},[p])])]):p}}}),ke={key:0},Ae=he({__name:"MainLayout",setup(e){const g=Te(),o=me(),t=qe(),{gameState:n}=o,{settingsState:r}=t,s=S(!1),f=S(r.openAIKey);function i(){s.value=!0}function a(){t.setOpenAIKey(f.value)}return P(()=>{r.openAIKey||g.dialog({title:"Open AI Key Required",message:"Please enter your Open AI key in settings",persistent:!0,ok:"Go to Settings"}).onOk(()=>{i()})}),(y,d)=>{const w=pe("router-view");return A(),U(He,{view:"hHh lpR fFf"},{default:C(()=>[h(Pe,{elevated:"",class:"bg-primary text-white"},{default:C(()=>[h($e,null,{default:C(()=>[h(Qe,null,{default:C(()=>d[2]||(d[2]=[ye(" Wiki Millionaire ")])),_:1}),_(n).playerName&&!_(n).isGameOver?(A(),be("div",ke," Player: "+j(_(n).playerName)+" | Current Prize: $"+j(_(n).currentPrize.toLocaleString()),1)):G("",!0),h(Se,{vertical:""}),h(I,{flat:"",round:"",dense:"",icon:"settings",onClick:i})]),_:1})]),_:1}),h(Ve,null,{default:C(()=>[h(w)]),_:1}),h(Ce,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=u=>s.value=u)},{default:C(()=>[h(we,{style:{"min-width":"350px","max-width":"90vw"},class:"q-mt-lg"},{default:C(()=>[h(J,null,{default:C(()=>d[3]||(d[3]=[X("div",{class:"text-h6"},"Settings",-1),X("div",{class:"text-caption"},"Configure game settings",-1)])),_:1}),f.value===""?(A(),U(J,{key:0},{default:C(()=>[h(ze,{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=u=>f.value=u),label:"Open AI Key",hint:"Enter your Open AI API key"},null,8,["modelValue"])]),_:1})):G("",!0),h(xe,{align:"right"},{default:C(()=>[Y(h(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[Z]]),Y(h(I,{flat:"",label:"Save",color:"primary",onClick:a},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{Ae as default};
